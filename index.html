<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VEXORA | Ashish Quantum Industries</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Plus+Jakarta+Sans:wght@300;600;800&display=swap');
        :root { --accent: #00f2ff; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; overflow: hidden; height: 100vh; }
        .heading-font { font-family: 'Orbitron', sans-serif; font-weight: 900; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(40px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; }
        .q-input { width: 100%; background: #111; border: 3px solid #333; padding: 20px; border-radius: 12px; color: #fff; font-weight: 700; margin-bottom: 15px; }
        .q-input:focus { border-color: var(--accent); }
        .login-btn { background: var(--accent); color: #000; font-family: 'Orbitron'; font-weight: 900; padding: 12px 30px; border-radius: 6px; cursor: pointer; }
        .hidden { display: none !important; }
        #auth-gate { position: fixed; inset: 0; z-index: 9000; background: rgba(0,0,0,0.98); display: flex; align-items: center; justify-content: center; }
        .tool-card { background: rgba(255,255,255,0.08); border: 2px solid rgba(255,255,255,0.1); padding: 30px; text-align: center; border-radius: 20px; cursor: pointer; transition: 0.3s; }
        .tool-card:hover { border-color: var(--accent); transform: translateY(-10px); }
    </style>
</head>
<body>

    <!-- AUTH GATE (Strict Login) -->
    <div id="auth-gate">
        <div class="glass p-10 w-full max-w-md text-center">
            <h2 class="heading-font text-2xl mb-8 uppercase">Neural Identity Required</h2>
            <div id="login-form">
                <input type="email" id="email-in" placeholder="EMAIL ADDRESS" class="q-input" required>
                <input type="password" id="pass-in" placeholder="ACCESS KEY" class="q-input" required>
                <button onclick="loginUser()" class="login-btn w-full !py-5">Verify & Synchronize</button>
                <div class="flex justify-between mt-6 text-[10px] font-bold text-gray-500 uppercase">
                    <span class="cursor-pointer hover:text-white">Recover Access</span>
                    <span class="cursor-pointer hover:text-white">New Registration</span>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN HUB -->
    <nav class="fixed top-0 w-full z-50 p-6 px-10 flex justify-between items-center glass border-t-0 border-x-0">
        <span class="heading-font text-xl text-white">VEXORA</span>
        <span id="credits-top" class="text-[10px] font-black text-cyan-400 tracking-widest">SESSIONS: 5/5 FREE</span>
    </nav>

    <div class="h-screen overflow-y-auto pt-24 pb-10 px-10">
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 max-w-7xl mx-auto" id="main-grid"></div>
    </div>

    <!-- STYLE TRANSFER WORKSPACE -->
    <div id="workspace-ui" class="fixed inset-0 z-[6000] bg-black hidden flex-col p-10 overflow-y-auto">
        <button onclick="closeTool()" class="text-xs font-bold text-gray-500 mb-10"><i class="fas fa-arrow-left"></i> BACK TO HUB</button>
        <div class="glass p-10 max-w-4xl mx-auto w-full">
            <h2 class="heading-font text-2xl mb-10 text-cyan-400 text-center">AI STYLE TRANSFER PRO</h2>
            
            <!-- Real Upload Input -->
            <input type="file" id="video-upload" class="hidden" accept="video/*" onchange="handleFileSelect(this)">
            <div class="w-full aspect-video bg-zinc-900 border-4 border-dashed border-zinc-800 rounded-3xl flex flex-col items-center justify-center cursor-pointer hover:border-cyan-400" onclick="document.getElementById('video-upload').click()">
                <i class="fas fa-cloud-upload text-5xl mb-4 text-zinc-700"></i>
                <p id="file-name" class="text-zinc-500 font-bold uppercase text-xs tracking-widest">Tap to Upload Source Video</p>
            </div>

            <div class="mt-10 space-y-6">
                <select id="style-sel" class="q-input">
                    <option>Pixar 3D Model</option><option>Cyberpunk Matrix</option><option>Ghibli Anime</option><option>Realistic 8K Enhance</option>
                </select>
                <textarea id="prompt-in" class="q-input h-32" placeholder="Instructions (e.g. Change sky to red, add AI music)"></textarea>
                <button onclick="runProcess()" class="login-btn w-full !py-6 !text-lg">GENERATE AI SEQUENCE</button>
            </div>

            <div id="output-box" class="mt-10 p-6 bg-zinc-950 rounded-2xl hidden border border-cyan-400/30 text-center">
                <p id="status-text" class="text-cyan-400 font-bold mb-4">Processing...</p>
                <button class="login-btn !bg-green-500 !text-black">Download 8K Neural Result</button>
            </div>
        </div>
    </div>

    <script>
        let isAuth = false;
        let credits = 5;

        // Strict Login Logic
        function loginUser() {
            const email = document.getElementById('email-in').value;
            const pass = document.getElementById('pass-in').value;
            
            if(email.includes("@") && pass.length >= 6) {
                isAuth = true;
                document.getElementById('auth-gate').classList.add('hidden');
                alert("Identity Confirmed: Nodes Synchronized.");
            } else {
                alert("Invalid Credentials. Please use a valid email and 6-digit password.");
            }
        }

        // Tool Data
        const tools = [
            {n:'AI Style Transfer', i:'wand-magic-sparkles'}, {n:'Auto-Coder', i:'code'}, {n:'8K Movie Gen', i:'film'},
            {n:'Health AI', i:'microscope'}, {n:'Digital Twin', i:'dna'}, {n:'Market AI', i:'chart-line'}
        ];

        const grid = document.getElementById('main-grid');
        tools.forEach((t, i) => {
            grid.innerHTML += `<div class="tool-card" onclick="openTool(${i})"><i class="fas fa-${t.i}"></i><h3 class="heading-font text-[10px] uppercase">${t.n}</h3></div>`;
        });

        function openTool(i) {
            if(!isAuth) return;
            if(tools[i].n === 'AI Style Transfer') document.getElementById('workspace-ui').classList.remove('hidden');
        }

        function closeTool() { document.getElementById('workspace-ui').classList.add('hidden'); }

        function handleFileSelect(input) {
            if(input.files && input.files[0]) {
                document.getElementById('file-name').innerText = "SELECTED: " + input.files[0].name;
                document.getElementById('file-name').classList.add('text-cyan-400');
            }
        }

        async function runProcess() {
            if(credits <= 0) { alert("Limit Reached!"); return; }
            const status = document.getElementById('status-text');
            document.getElementById('output-box').classList.remove('hidden');
            status.innerText = "VEXORA: Calling Ashish Quantum Nodes...";

            try {
                // Fixed API Call
                const response = await fetch('/api/process', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ tool: "Style Transfer", prompt: document.getElementById('prompt-in').value })
                });
                const data = await response.json();
                
                if(data.status === "Success") {
                    credits--;
                    document.getElementById('credits-top').innerText = `SESSIONS: ${credits}/5 FREE`;
                    status.innerText = "SEQUENCE SUCCESSFULLY PROCESSED.";
                }
            } catch (err) {
                alert("Backend Syncing... Please wait 5 seconds for Vercel to wake up.");
            }
        }
    </script>
</body>
</html>
